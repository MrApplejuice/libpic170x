<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libpic170x: Pin IO library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libpic170x
   &#160;<span id="projectnumber">0.2</span>
   </div>
   <div id="projectbrief">Ease of use library for PIC16(L)1705/1709 chips</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Pin IO library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md5">Reading pin data</a></li>
<li class="level1"><a href="#autotoc_md6">Switching pin modes</a></li>
<li class="level1"><a href="#autotoc_md7">Writing pin outputs</a></li>
</ul>
</div>
<div class="textblock"><p>The PinIO library <a class="el" href="io__control_8h.html" title="GPIO input/output library allowing to write to and read from IO pins. ">io_control.h</a> allows easy control of a PIC's GPIO pins. It also provides definitions that are internally used by other libraries for interacting with pins. The current set of features is:</p>
<ul>
<li>Switching pin netween input and output mode</li>
<li>Reading input/output states of individual pins</li>
<li>Writing output values</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Reading pin data</h1>
<p>When a PIC is reset, all pins are set to "input, high impedance mode". Therefore, reading data from individual pins is simply done by invoking the <a class="el" href="io__control_8h.html#a0365d345b21a4df853595c6a2487f816">pin_get_input(PinDef*)</a> function. A <a class="el" href="structPinDef.html">PinDef*</a> defines the pin for which the input state should be retrieved. All pins of supported PICs are defines as contants of the form <code>PIN_RA0</code>, referring to pin RA0 on a supported PIC. If a pin is not present on a given PIC, like, for example, <code>PIN_RB4</code> on a PIC16LF1705, uses of that variable will still be valid but calls to any function in <a class="el" href="io__control_8h.html" title="GPIO input/output library allowing to write to and read from IO pins. ">io_control.h</a> for that pin will result in NOP.</p>
<div class="fragment"><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io__control_8h.html">io_control.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div><div class="line">    <span class="keywordtype">bool</span> pin_state = <a class="code" href="io__control_8h.html#a0365d345b21a4df853595c6a2487f816">pin_get_input</a>(<a class="code" href="io__control_8h.html#a878d884188c2391f85a84c4d7705126d">PIN_RA0</a>);</div><div class="line">    <span class="comment">// True will mean that the pin was high, false means the pin was low</span></div><div class="line">    <span class="comment">// NOTE: When reading digital inputs the pin mode should be switched first though! See below.</span></div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Switching pin modes</h1>
<p>To swtich a pin from input to low-impedance output mode, you can use the function <a class="el" href="io__control_8h.html#aadc18936a7d416711774931a4314ddae">pin_set_pin_mode()</a>. The function takes two arguments, the first being the pin to set, the second being the mode, where <code>true</code> indicates that the pin should be configured in output mode, and <code>false</code> that the pin should be configured in input mode.</p>
<div class="fragment"><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io__control_8h.html">io_control.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div><div class="line">    <span class="comment">// switch pin RA1 to output-mode</span></div><div class="line">    <a class="code" href="io__control_8h.html#aadc18936a7d416711774931a4314ddae">pin_set_pin_mode</a>(<a class="code" href="io__control_8h.html#aee7b080226b4ee99802c90ed1efcd0df">PIN_RA1</a>, <span class="keyword">true</span>);</div><div class="line">}</div></div><!-- fragment --><p>Additionally, pins can be switched between analog and digital input modes. By default all pins are configured to use analog input mode, but for digital signals it is generally advisable to switch pins to ditigal input mode, and even required if an input pin is meant to be used with any other digital subsystem like the UART module. Switching the input mode can be done using the function <a class="el" href="io__control_8h.html#a415584ab9e88a63583f775b026ef0e5b">pin_set_input_mode()</a>. The function can set the input mode a pin to:</p>
<ul>
<li><code>PIN_INPUT_MODE_DIGITAL</code> digital mode</li>
<li><code>PIN_INPUT_MODE_ANALOG</code> analog mode (the default)</li>
</ul>
<p>When intending to read digital input signals, a better example of the first code snipped shown on this page would therefore be:</p>
<div class="fragment"><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io__control_8h.html">io_control.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div><div class="line">    <span class="comment">// First switch to digital input mode before attempting to </span></div><div class="line">    <span class="comment">// read the ditial signal</span></div><div class="line">    <a class="code" href="io__control_8h.html#a415584ab9e88a63583f775b026ef0e5b">pin_set_input_mode</a>(<a class="code" href="io__control_8h.html#a878d884188c2391f85a84c4d7705126d">PIN_RA0</a>, <a class="code" href="io__control_8h.html#aabc81559753a36198c6668254c61c75d">PIN_INPUT_MODE_DIGITAL</a>);</div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> pin_state = <a class="code" href="io__control_8h.html#a0365d345b21a4df853595c6a2487f816">pin_get_input</a>(<a class="code" href="io__control_8h.html#a878d884188c2391f85a84c4d7705126d">PIN_RA0</a>);</div><div class="line">    <span class="comment">// True will mean that the pin was high, false means the pin was low</span></div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Writing pin outputs</h1>
<p>If a pin has been configured as an output, it is likely that one wnnts to write out data via the pin. This can be achived by using the function <a class="el" href="io__control_8h.html#aaccbdcff4fcefbe9a30ffc29878c6bf7">pin_set_output()</a>. The function takes a single argument, namely the intended output state of the pin.</p>
<p>A simple "led blink" example:</p>
<div class="fragment"><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io__control_8h.html">io_control.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div><div class="line">    <span class="comment">// Use RA0 as an output blink an LED on.</span></div><div class="line">    <a class="code" href="io__control_8h.html#aadc18936a7d416711774931a4314ddae">pin_set_pin_mode</a>(<a class="code" href="io__control_8h.html#a878d884188c2391f85a84c4d7705126d">PIN_RA0</a>, <span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line">        <span class="comment">// Toggle output by reading current output and inverting it with &#39;!&#39;</span></div><div class="line">        <a class="code" href="io__control_8h.html#aaccbdcff4fcefbe9a30ffc29878c6bf7">pin_set_output</a>(<a class="code" href="io__control_8h.html#a878d884188c2391f85a84c4d7705126d">PIN_RA0</a>, !<a class="code" href="io__control_8h.html#a0365d345b21a4df853595c6a2487f816">pin_get_input</a>(<a class="code" href="io__control_8h.html#a878d884188c2391f85a84c4d7705126d">PIN_RA0</a>));</div><div class="line">        <span class="comment">// Wait 100ms to make the blinking visible</span></div><div class="line">        __delay_ms(100);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
